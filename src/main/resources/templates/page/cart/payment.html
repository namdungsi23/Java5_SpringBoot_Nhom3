<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layouts/main-content}">

<body>
	<div layout:fragment="content" class="container my-4">
		<h2 class="mb-4">Xác nhận thanh toán</h2>

		<p><strong>Tổng tiền:</strong>
		    <span class="text-danger fw-bold"
		          th:text="${#numbers.formatDecimal(amount,0,'COMMA',0,'POINT')} + ' đ'">
		    </span>
		</p>
		
		<ul class="nav nav-tabs mb-3" id="checkoutTabs" role="tablist">
			<li class="nav-item" role="presentation">
				<button class="nav-link active"
						 id="info-tab"
						 data-bs-toggle="tab"
						 data-bs-target="#info"
						 type="button"
						 role="tab">
						 Thông tin người nhận
				</button>
			</li>
			
			<li class="nav-item" role="presentation">
				<button class="nav-link"
				        id="payment-tab"
				        data-bs-toggle="tab"
				        data-bs-target="#payment"
				        type="button"
				        role="tab">
				        Thanh toán
				</button>
			</li>
		</ul>
		
		<form th:action="@{/checkout/confirm}" method="post">

	        <div class="tab-content">
	
	            <!-- TAB 1: THÔNG TIN NGƯỜI NHẬN -->
	            <div class="tab-pane fade show active" id="info">
	
	                <div class="card p-4">
	                    <h5 class="mb-3">Thông tin người nhận</h5>
	
	                    <div class="mb-3">
	                        <label class="form-label">Tài khoản</label>
	                        <input type="text"
	                               name="username"
	                               class="form-control"
	                               th:value="${username}"
	                               readonly>
	                    </div>
	
	                    <div class="mb-3">
	                        <label class="form-label">Địa chỉ giao hàng</label>
	                        <input type="text"
	                               name="address"
	                               class="form-control"
	                               placeholder="Nhập địa chỉ nhận hàng"
	                               required>
	                    </div>
	
	                    <div class="mb-3">
	                        <label class="form-label">Ngày tạo đơn</label>
	                        <input type="text"
	                               class="form-control"
	                               th:value="${#dates.format(createdAt,'dd/MM/yyyy HH:mm')}"
	                               readonly>
	                    </div>
	                </div>
	            </div>
	
	            <!-- TAB 2: THANH TOÁN -->
	            <div class="tab-pane fade" id="payment">
	
	                <!-- MOMO -->
	                <div th:if="${paymentMethod.name() == 'MOMO'}"
	                     class="card p-4 mb-3">
	
	                    <h5>Thanh toán qua MOMO</h5>
	
	                    <ol>
	                        <li>Mở ứng dụng MOMO</li>
	                        <li>Chọn <strong>Quét mã QR</strong></li>
	                        <li>Quét mã bên dưới</li>
	                        <li>Xác nhận thanh toán</li>
	                    </ol>
	
	                    <img src="/images/momo-qr.png"
	                         width="250"
	                         class="border rounded">
	                </div>
	
	                <!-- TECHCOMBANK -->
	                <div th:if="${paymentMethod.name() == 'TECHCOMBANK'}"
	                     class="card p-4 mb-3">
	
	                    <h5>Chuyển khoản Techcombank</h5>
	
	                    <ul class="list-group mb-3">
	                        <li class="list-group-item">
	                            <strong>Ngân hàng:</strong> Techcombank
	                        </li>
	                        <li class="list-group-item">
	                            <strong>Số tài khoản:</strong> 1903 3132 6590 16
	                        </li>
	                        <li class="list-group-item">
	                            <strong>Chủ tài khoản:</strong> DANG AN NGUYEN
	                        </li>
	                        <li class="list-group-item">
	                            <strong>Số tiền:</strong>
	                            <span class="text-danger fw-bold"
	                                  th:text="${#numbers.formatDecimal(amount,0,'COMMA',0,'POINT')} + ' đ'">
	                            </span>
	                        </li>
	                        <li class="list-group-item">
	                            <strong>Nội dung:</strong>
	                            <code>SHOP_[ID_DON_HANG]</code>
	                        </li>
	                    </ul>
	
	                    <p class="text-warning">
	                        Vui lòng chuyển khoản đúng nội dung để hệ thống xác nhận.
	                    </p>
	                </div>
	
	                <!-- BUTTONS -->
	                <div class="d-flex justify-content-center gap-3">
	                    <button type="submit" class="btn btn-success">
	                        Tôi đã thanh toán
	                    </button>
	
	                    <a th:href="@{/checkout}" class="btn btn-danger">
	                        Quay lại
	                    </a>
	                </div>
	
	            </div>
	        </div>
	    </form>
		
	</div>

</body>

</html>